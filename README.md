# Stereo-Matching

### 1. im0.ppm (left) and im8.ppm (right) are the pictures taken by two different camera positions.If you load the images, they will be a three dimensional array of 381 × 430 × 3, whose thirddimension is for the three color channels (RGB). Let’s call them XL and XR. For the (i,j)-th pixel in the right image, XR , which is a 3-d vector of RGB intensities, we can scan and (i,j,:) find the most similar pixel in the left image at i-th row (using a metric of your choice). For example, I did the search from XL to XL , to see which pixel among the 40 are (i,j,:) (i,j +39,:) the closest. I record the index-distance of the closest pixel. Let’s say that XL is the (i,j +19,:) most similar one to XR . Then, the index-distance is 19. I record this index-distance (to (i,j,:) the closest pixel in the left image) for all pixels in my right image to create a matrix called “disparity map”, D, whose (i, j)-th element says the index-distance between the (i, j)-th pixel of the right image and its closest pixel in the left image. For an object in the right image, if its pixels are associated with an object in the left image, but are shifted far away, that means the object is close to the camera, and vice versa.
### 2. Calculate the disparity map D from im0.ppm and im8.ppm, which will be a matrix of 381×390 (since we search within only 40 pixels). Vectorize the disparity matrix and draw a histogram. How many clusters do you see?
### 3. Write up your own GMM clustering code, and cluster the disparity values in D. Each value will belong to (only) one of the clusters. The number of clusters says the number of depth levels. If you replace the disparity values with the cluster means, you can recover the depth map with k levels. Plot your depth map (the disparity map replaced by the mean disparities as in the image quantization examples) in gray scale–pixels of the frontal objects should be bright, while the ones in the back get darker.
### 4. Extend your implementation with the MRF’s smoothing priors using an eight neighborhood system (e.g. Ni,j = (i−1,j −1),(i−1,j),(i−1,j +1),(i,j −1),(i,j +1),(i+1,j −1),(i+ 1,j),(i+1,j+1) . Feel free to choose either ICM or Gibbs sampling. Show me the smoothed results. You can use the Gaussian-kernel-looking prior probability equations.
